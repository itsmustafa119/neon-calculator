<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aether Calc</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Ionicons -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <!-- Chart.js & Plugin -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8"></script> <!-- Required for Zoom -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>
</head>
<body>
    <div class="background-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
    </div>
    
    <!-- Stylish Header -->
    <header class="app-header">
        <h1 class="app-title">Aether Calc</h1>
        <p class="app-subtitle">Precision & Elegance</p>
    </header>

    <div class="calculator-wrapper">
        <!-- Controls -->
        <div class="extra-controls">
            <div class="tabs">
                <button class="tab-btn active" data-tab="calc">Calc</button>
                <button class="tab-btn" data-tab="graph">Graph</button>
                <button class="tab-btn" data-tab="currency">Currency</button>
            </div>
            <div class="action-buttons">
                <button id="voice-btn" class="voice-btn" title="Voice Control">
                    <ion-icon name="mic-outline"></ion-icon>
                </button>
                <button id="speak-toggle" class="voice-btn" title="Text-to-Speech">
                    <ion-icon name="volume-high-outline"></ion-icon>
                </button>
                <button id="history-toggle" class="voice-btn" title="History">
                    <ion-icon name="time-outline"></ion-icon>
                </button>
            </div>
        </div>

        <div class="calculator">
            <!-- Standard Calc View -->
            <div id="view-calc">
                <div class="display">
                    <div class="previous-operand" data-previous-operand></div>
                    <div class="current-operand" data-current-operand>0</div>
                </div>
                <div class="buttons-grid">
                    <!-- Row 1: Sci Functions -->
                    <button class="function-science" data-operation="sin()">sin</button>
                    <button class="function-science" data-operation="cos()">cos</button>
                    <button class="function-science" data-operation="tan()">tan</button>
                    <button class="function-science" data-operation="sqrt()">√</button>
        
                    <!-- Row 2: Sci Functions + AC -->
                    <button class="function-science" data-operation="^">^</button>
                    <button class="function-science" data-operation="(">(</button>
                    <button class="function-science" data-operation=")">)</button>
                    <button class="function" data-all-clear>AC</button>
                    
                    <!-- Row 3: 7-9 + Divide -->
                    <button data-number>7</button>
                    <button data-number>8</button>
                    <button data-number>9</button>
                    <button class="operator" data-operation="/">÷</button>
                    
                    <!-- Row 4: 4-6 + Multiply -->
                    <button data-number>4</button>
                    <button data-number>5</button>
                    <button data-number>6</button>
                    <button class="operator" data-operation="*">×</button>
                    
                    <!-- Row 5: 1-3 + Subtract -->
                    <button data-number>1</button>
                    <button data-number>2</button>
                    <button data-number>3</button>
                    <button class="operator" data-operation="-">-</button>
                    
                    <!-- Row 6: 0, Dot, DEL, Add -->
                    <button data-number>0</button>
                    <button data-number>.</button>
                    <button class="function" data-delete>DEL</button>
                    <button class="operator" data-operation="+">+</button>
        
                    <!-- Row 7: Equals (Spans full width) -->
                    <button class="equals span-four" data-equals>=</button>
                </div>
            </div>

            <!-- Graph View -->
            <div id="view-graph" class="graph-view">
                <canvas id="graphCanvas"></canvas>
                <div class="graph-controls">
                    <input type="text" id="graph-input" placeholder="e.g. x^2, sin(x)" >
                    <button id="plot-btn">Plot</button>
                </div>
                <!-- Quick Functions -->
                <div class="quick-funcs">
                    <button class="quick-btn" onclick="addGraphFunc('sin(x)')">sin</button>
                    <button class="quick-btn" onclick="addGraphFunc('cos(x)')">cos</button>
                    <button class="quick-btn" onclick="addGraphFunc('x^2')">x²</button>
                    <button class="quick-btn" onclick="resetZoom()">Reset Zoom</button>
                </div>
            </div>

            <!-- Currency View -->
            <div id="view-currency" class="currency-view">
                <div class="converter-box">
                    <h3>Convert Currency</h3>
                    <div class="input-group">
                        <input type="number" id="curr-amount" value="1" min="0">
                        <select id="curr-from">
                            <option value="USD">USD</option>
                            <option value="EUR">EUR</option>
                            <option value="GBP">GBP</option>
                            <option value="JPY">JPY</option>
                            <option value="CNY">CNY</option>
                            <option value="CAD">CAD</option>
                            <option value="AUD">AUD</option>
                            <!-- JS will populate more if available -->
                        </select>
                    </div>
                    
                    <div class="swap-icon">
                        <ion-icon name="swap-vertical-outline" id="swap-curr"></ion-icon>
                    </div>

                    <div class="input-group">
                        <input type="text" id="curr-result-val" readonly value="...">
                        <select id="curr-to">
                            <option value="EUR">EUR</option>
                            <option value="USD">USD</option>
                            <option value="GBP">GBP</option>
                            <option value="JPY">JPY</option>
                            <option value="CNY">CNY</option>
                            <option value="CAD">CAD</option>
                            <option value="AUD">AUD</option>
                        </select>
                    </div>

                    <button id="convert-btn" class="convert-btn">Convert Now</button>
                    <div id="rate-info" class="rate-info">Rate: ...</div>
                </div>
            </div>

        </div>
    </div>

    <!-- History Panel -->
    <div class="history-panel" id="history-panel">
        <div class="history-header">
            <h2>History</h2>
            <button id="close-history" class="close-btn"><ion-icon name="close-outline"></ion-icon></button>
        </div>
        <div class="history-list" id="history-list">
            <div class="empty-state">No calculations yet</div>
        </div>
        <button id="clear-history" class="clear-history-btn">Clear History</button>
    </div>

    <script src="script.js"></script>
</body>
</html>